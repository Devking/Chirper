<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8" />
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<link rel="shortcut icon" href="{{ url_for('static', filename='favicon.ico') }}">
	<title>Chirper | {{username}}</title>

	<link href='https://fonts.googleapis.com/css?family=Montserrat:400,700' rel='stylesheet' type='text/css'>
	<link href='https://fonts.googleapis.com/css?family=Open+Sans:400,300,300italic,400italic,600,600italic,700,700italic,800,800italic' rel='stylesheet' type='text/css'>
	<link rel="stylesheet" href="/static/home.css" />
	<link rel="stylesheet" media="screen and (max-width: 1000px)" href="/static/mid-home.css" />
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.2.0/jquery.min.js"></script>
	<script src="/static/home.js"></script>
</head>
<body>

	<div class="header">
		<div class="head-wrap">
			<div class="title">Chirper</div>
			<div class="username">Logged in as <b>{{username}}</b> (<em>{{email}}</em>).</div>
			<div class="delete-user"><a class="fn-delete">Delete User</a></div>
			<div class="logout"><a href="/logout">Logout</a></div>
			<div class="clear"></div>
		</div>
	</div>

	<div class="page">

		<div class="chirper">
			<form method="POST" action="/postchirp">
				<div class="chirp-center">
					<input type="text" autocomplete="off" class="fn-chirp-field chirp-field" name="chirp" maxlength="100" placeholder="What's happening on your mind?"></input>
					<div class="chirp-error">
					{% if emptychirp %}
					Can't chirp nothing!
					{% endif %}
					</div>
					<div class="chirp-stats">
						<span class="fn-chirp-count">100</span>
						<input type="submit" value="Chirp!"></input>
					</div>
				</div>
				<div class="clear"></div>
			</form>
		</div>

		<div class="chirp-content">
			{% for user in chirps %}
				<div class="chirp-user">
					<div class="author">
						{% if user.author == username %}
						<h1>Your Chirps</h1>
						{% else %}
						<h1>{{ user.author }}</h1>
						{% endif %}
					</div>
					{% if user.chirps|length == 0 %}
					This user has no chirps.
					{% endif %}
					{% for chirp in user.chirps %}
						<div class="message">
						{{ chirp }}
						{% if user.author == username %}
							(<a href="/deletechirp/{{ loop.index0 }}">Delete Chirp</a>)
						{% endif %}
						</div>
					{% endfor %}
				</div>
			{% endfor %}
		</div>

		<div class="friends-list">
			<h1>Friends List</h1>

			<div class="add-friend">
				<form method="POST" action="/addfriend">
					<input type="text" name="friend" maxlength="20" placeholder="Username"></input>
					<input type="submit" value="Add friend"></input>
				</form>
				{% if friendnotfound %}
				User doesn't exist!<br />
				{% endif %}
				{% if alreadyfriends %}
				Already friends with user!<br />
				{% endif %}
				{% if addyourself %}
				Can't add yourself!<br />
				{% endif %}
				{% if emptyfriend %}
				Can't add blank user!<br />
				{% endif %}
			</div>

			<div class="friends">
				{% if friends|length == 0 %}
				No friends
				{% endif %}
				{% for friend in friends %}
				<span class="friend">
					{{ friend }} (<a href="/unfollow/{{ friend }}">Unfollow</a>)
					{% if loop.index0 != 0 %}<a href="/moveup/{{ loop.index0 }}">&uarr;</a>{% endif %}
					{% if loop.index0 != friends|length - 1 %}<a href="/movedown/{{ loop.index0 }}">&darr;</a>{% endif %}
				</span><br />
				{% endfor %}
			</div>
		</div>
	</div>

</body>
</html>
